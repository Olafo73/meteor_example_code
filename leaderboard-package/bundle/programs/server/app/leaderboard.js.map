{"version":3,"sources":["meteor://ðŸ’»app/leaderboard.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/leaderboard.js","sourcesContent":["// Set up a collection to contain player information. On the server,\n// it is backed by a MongoDB collection named \"players\".\n\nPlayers = new Mongo.Collection(\"players\");\n\nif (Meteor.isClient) {\n  Template.leaderboard.helpers({\n    players: function () {\n      return Players.find({}, { sort: { score: -1, name: 1 } });\n    },\n    selectedName: function () {\n      var player = Players.findOne(Session.get(\"selectedPlayer\"));\n      return player && player.name;\n    }\n  });\n\n  Template.leaderboard.events({\n    'click .inc': function () {\n      Players.update(Session.get(\"selectedPlayer\"), {$inc: {score: 5}});\n    }\n  });\n\n  Template.player.helpers({\n    selected: function () {\n      return Session.equals(\"selectedPlayer\", this._id) ? \"selected\" : '';\n    }\n  });\n\n  Template.player.events({\n    'click': function () {\n      Session.set(\"selectedPlayer\", this._id);\n    }\n  });\n}\n\n// On server startup, create some players if the database is empty.\nif (Meteor.isServer) {\n  Meteor.startup(function () {\n    if (Players.find().count() === 0) {\n      var names = [\"Ada Lovelace\", \"Grace Hopper\", \"Marie Curie\",\n                   \"Carl Friedrich Gauss\", \"Nikola Tesla\", \"Claude Shannon\"];\n      _.each(names, function (name) {\n        Players.insert({\n          name: name,\n          score: Math.floor(Random.fraction() * 10) * 5\n        });\n      });\n    }\n  });\n}\n"]}